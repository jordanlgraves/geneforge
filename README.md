# AI-Driven Genetic Circuit Design

This repository hosts a proof-of-concept system that **automates genetic circuit design** from natural language requests, integrating Large Language Models (LLMs), a biological knowledge graph, the Cello design automation framework, the iBioSim simulator, and a Reinforcement Learning (RL) loop for iterative optimization. The goal is to streamline the **design-build-test-learn cycle** in synthetic biology, making it easier and faster to design reliable genetic circuits in organisms such as *E. coli*.

---

## Table of Contents

1. [Project Background & Motivation](#project-background--motivation)  
2. [System Architecture Overview](#system-architecture-overview)  
3. [Implementation Plan & Timeline](#implementation-plan--timeline)  
4. [Installation & Setup](#installation--setup)  
5. [Usage Instructions](#usage-instructions)  
6. [Key Tools & References](#key-tools--references)  
7. [Example Use Cases](#example-use-cases)  
8. [Roadmap & Future Work](#roadmap--future-work)  
9. [Contributing](#contributing)  
10. [License & Acknowledgments](#license--acknowledgments)

---

## Project Background & Motivation

Designing synthetic gene circuits is time-consuming and requires expertise in molecular biology, genetic parts, and system dynamics. This project automates that process by **translating a user’s natural-language circuit requirements** (e.g., “Build a 2-input AND gate in *E. coli* that does X and has Y behavior”) by **reasoning over the users desired circuit behavior** and converting the requirements into **formal device designs** and **formal logic representation**, running it through **Cello** for circuit synthesis, simulating the design in **iBioSim**, and finally **optimizing the design and reasoning steps** through a Reinforcement Learning loop. A biological **knowledge graph** (with part libraries and constraints) grounds the design in real, well-characterized parts and prevents “hallucinated” or biologically infeasible solutions.

The overarching objective is to **accelerate the design-build-test cycle** in synthetic biology, providing a developer-friendly pipeline that can be extended to more complex genetic programs and eventually integrate real wet-lab feedback.

---

## System Architecture Overview

The system flows **from a natural language request** all the way to **an optimized DNA design** through these modules:

1. **LLM Module**  
   - Parses text (e.g., “genetic circuit that does X and has Y behavior in *E. coli*”), reasons over requirements, optionally consulting knowledge graph or RAG to inform design, and converts requirements into a formal logic spec (Verilog or Boolean).
   - May consult the knowledge graph to confirm organism or part constraints.

2. **Knowledge Graph**  
   - Stores biological parts, interactions, and ontologies (e.g., SBOL).  
   - Ensures only valid, **characterized genetic parts** are selected for a given organism.

3. **Knowledge Corpus**
  - A collection of documents, papers, and other resources that can be used to inform the design process.
  - A search engine that can be used to search the internet for relevant literature (e.g. PubMed, Google Scholar AddGene, etc.)

4. **Cello Integration**  
   - Takes formal logic generated by the LLM (e.g., Verilog) plus a part library.  
   - Produces a **DNA design** implementing that logic.

5. **iBioSim Simulation**  
   - Simulates the resulting circuit (in SBOL/SBML) to predict behavior.  
   - Evaluates truth table correctness, timing, or other performance metrics.

6. **Reinforcement Learning**  
   - Uses the simulation’s feedback as a **reward signal** to iteratively **optimize part choices** or circuit topology.  
   - Loops back to Cello/iBioSim as it searches for higher-performing designs.

---

## Implementation Plan & Timeline

This project will be implemented in **six phases** over **4–6 months**:

1. **Phase 1 (Month 0–1): LLM & Knowledge Graph Setup**  
   - Configure/fine-tune the LLM to convert NL descriptions and circuit requirements to device designs and/or formal logic.  
   - Build a basic knowledge graph or parts database for *E. coli*.

2. **Phase 2 (Month 2): Cello Integration**  
   - Convert LLM output (Verilog/Boolean) into valid Cello input.  
   - Automatically run Cello to produce initial DNA circuit designs.

3. **Phase 3 (Month 3): iBioSim Simulation**  
   - Convert Cello output (SBOL/GenBank) to iBioSim-compatible models.  
   - Perform steady-state or time-series simulations to evaluate performance.

4. **Phase 4 (Month 4): Reinforcement Learning Loop**  
   - Formulate design modifications as RL “actions.”  
   - Use simulation results as “rewards” to iteratively improve design.

5. **Phase 5 (Month 5): Integration & Proof-of-Concept**  
   - Merge all modules into a single end-to-end pipeline.  
   - Test with a basic example to validate data flow, logic correctness, and integration.

6. **Phase 6 (Month 6): Demonstration & Extension**  
   - Apply the pipeline to a second example (e.g., delayed output).  
   - Show dynamic circuit behaviors and finalize documentation.

**Core Deliverables**: an integrated pipeline, example circuits, performance data, and robust documentation.

---

## Installation & Setup

Below is a minimal guide to installing and configuring dependencies:

1. **Python Environment**  
   - Install Python 3.8+ and create a virtual environment (e.g., `conda` or `venv`).  
   - Install required Python libraries (example command: `pip install -r requirements.txt`).  

2. **Java & Tools**  
   - **Cello** and **iBioSim** are Java-based. Install a compatible Java (OpenJDK 11+).  
   - Download **Cello** (v2.0+) and **iBioSim** and place them in your `$PATH` or reference them via scripts.

3. **Knowledge Graph / SBOL Repositories**  
   - (Optional) Set up **SynBioHub** or maintain a local SBOL/JSON library for *E. coli* parts.  

4. **GPU (Optional)**  
   - If you plan to run large LLMs or RL at scale, configure CUDA/CuDNN or use cloud GPUs.  

5. **API Keys**  
   - **OpenAI** API key for LLM calls.
   - **DeepSeek** API key for LLM calls.
   - **PubMed** API key for literature search.

---

## Usage Instructions

A typical workflow for designing a simple logic gate:

1. **Prepare a Specification**  
   - Write a text file (e.g., `spec.txt`) with something like:  
     *“Design a 2-input AND gate in *E. coli* that drives GFP when both inputs are present.”* or a more complex requirements such as *“Design a 2-input AND gate in *E. coli* that drives GFP when both inputs are present and utilizes the enzyme T7 RNA polymerase to drive the expression of the AND gate.”*

2. **Run the LLM Module**  
   - Invoke the script to parse the natural-language requirements into a formal representation:  
     ```bash
     python run_llm.py --spec spec.txt --output logic.v
     ```
   - Output is a `.v` file or JSON describing the logic function.

3. **Cello Circuit Synthesis**  
   - Feed the logic file and part library to Cello:  
     ```bash
     python run_cello.py --verilog logic.v --lib ecoli_lib.json --out cello_output
     ```
   - Cello outputs DNA sequences (e.g., SBOL, GenBank) in `cello_output`.

4. **iBioSim Simulation**  
   - Convert or load the SBOL/GenBank in iBioSim for simulation:  
     ```bash
     python run_ibiopsim.py --input cello_output/design.sbol --config sim_config.json
     ```
   - Generates performance data (e.g., truth table correctness, time-series).

5. **Reinforcement Learning Optimization**  
   - Use RL to tweak parts and re-simulate:  
     ```bash
     python run_rl.py --base_design cello_output/design.sbol --iterations 50
     ```
   - The RL agent attempts to maximize a defined “reward,” e.g., minimal leakage, correct ON states.

6. **Analyze Final Design**  
   - Check `results/` for the optimized circuit, simulation plots, and logs.

Script names are placeholders; actual commands may differ. Adjust config files or environment variables as needed.

---

## Key Tools & References

- **Cello**  
  - *Jones et al., Nat. Protoc., 2022* ([PubMed](https://pubmed.ncbi.nlm.nih.gov/35197606/))  
  - Automatic circuit design from Verilog to DNA.

- **iBioSim**  
  - *Myers et al., Bioinformatics, 2009* ([PubMed](https://pubmed.ncbi.nlm.nih.gov/19628507/))  
  - Simulation & modeling of genetic networks using SBOL/SBML.

- **SBOL & Knowledge Graphs**  
  - *Beal et al., ACS Synth Biol., 2019*  
  - Standard for describing synthetic biology parts and assemblies.

- **Large Language Models**  
  - Used for parsing specs into formal logic, e.g., GPT-4 or Llama-2.

- **Reinforcement Learning**  
  - *Sabzevari et al., PLOS Comp Bio, 2022*  
  - Iterative optimization using simulation as feedback.

For a more detailed bibliography and resource list, see the project’s `docs/` folder.

---

## Example Use Cases

### 1. 2-Input AND Gate in *E. coli*
- **User Spec**: “Produce GFP only if inputs A and B are both present.”  
- The system:  
  1. LLM → formal logic (“GFP = A AND B”).  
  2. Cello → picks *E. coli* promoters/repressors for an AND gate.  
  3. iBioSim → simulates the design to confirm correct truth table.  
  4. RL → optionally optimizes part strengths to reduce leakage.

### 2. Delayed Fluorescent Reporter
- **User Spec**: “After the trigger is applied, start GFP expression only after a time delay.”  
- The system identifies or designs a multi-stage circuit (e.g., a transcriptional cascade).  
- iBioSim checks if output is delayed in time-series data.  
- RL tweaks parameters (promoter strengths, decay rates) to achieve the desired delay.

These illustrate how the pipeline handles **digital logic** and **temporal dynamics**.

---

## Roadmap & Future Work

After the proof-of-concept:

- **Wet Lab Integration**: Incorporate real experimental data for a true design-build-test-learn cycle.  
- **More Complex Circuits**: Multi-layer logic, oscillators, feedback control, or metabolic pathways.  
- **Multi-Objective Optimization**: Balance performance, resource usage, and other criteria.  
- **Extended Organism Support**: Yeast, mammalian cells, or cell-free systems.  
- **Advanced LLM Usage**: On-the-fly literature retrieval, deeper domain-specific generation.  
- **Stochastic/Noise Modeling**: Support iBioSim’s or other tools’ stochastic simulations for more accurate predictions.

---

## Contributing

We welcome contributions! To get involved:

1. **Fork & Clone** this repository.  
2. **Create an Issue** to propose ideas or report bugs.  
3. **Submit Pull Requests** with clear documentation.  
4. For major changes, please discuss in an issue first.

Maintainers will review PRs, provide feedback, and merge once approved.

---

## License & Acknowledgments

- **License**: MIT License (or similar open-source license to be clarified in `LICENSE`).  
- **Acknowledgments**:  
  - Built on open-source tools: Cello, iBioSim, SBOL libraries, and various ML frameworks.  
  - Special thanks to the synthetic biology community for sharing part libraries and design data.

---

*© 2025 AI-Driven Genetic Circuit Design Project.*
